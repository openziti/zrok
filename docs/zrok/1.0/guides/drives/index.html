<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-zrok docs-version-1.0 docs-doc-page docs-doc-id-guides/drives" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Drives | zrok</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://docs.zrok.io/docs/zrok/1.0/guides/drives/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" data-rh="true" name="nf-layout-version" content="0.1.1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="docusaurus_version" content="1.0"><meta data-rh="true" name="docusaurus_tag" content="docs-zrok-1.0"><meta data-rh="true" name="docsearch:version" content="1.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-zrok-1.0"><meta data-rh="true" property="og:title" content="Drives | zrok"><meta data-rh="true" name="description" content="The zrok drives CLI tools allow for simple, ergonomic management and synchronization of local and remote files."><meta data-rh="true" property="og:description" content="The zrok drives CLI tools allow for simple, ergonomic management and synchronization of local and remote files."><link data-rh="true" rel="icon" href="/img/zrok-favicon.png"><link data-rh="true" rel="canonical" href="https://docs.zrok.io/docs/zrok/1.0/guides/drives/"><link data-rh="true" rel="alternate" href="https://docs.zrok.io/docs/zrok/1.0/guides/drives/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.zrok.io/docs/zrok/1.0/guides/drives/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Guides","item":"https://docs.zrok.io/docs/zrok/1.0/category/guides"},{"@type":"ListItem","position":2,"name":"Drives","item":"https://docs.zrok.io/docs/zrok/1.0/guides/drives"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-MDFLZPK8"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-MDFLZPK8",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.f95dbfed.css">
<script src="/assets/js/runtime~main.58a4bd10.js" defer="defer"></script>
<script src="/assets/js/main.9afb8f4e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"dark"),document.documentElement.setAttribute("data-theme-choice",t||"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://zrok.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/zrok-1.0.0-rocket-green.svg" alt="zrok Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/zrok-1.0.0-rocket-green.svg" alt="zrok Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">zrok</b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/zrok/1.0/guides/drives/">1.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/zrok/guides/drives/">2.0 (Current)</a></li><li><a class="dropdown__link" href="/docs/zrok/1.1/guides/drives/">1.1</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/zrok/1.0/guides/drives/">1.0</a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://zrok.io/pricing/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">pricing<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://myzrok.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">account<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/orgs/openziti/projects/16" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">roadmap<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/openziti/zrok" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub"></a><a href="https://openziti.discourse.group/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discourse-link" title="Discourse"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="starUsRoot_XOT4"><span style="color:whitesmoke">Star zrok on GitHub<!-- --> </span><span style="height:20px"><span><a href="https://github.com/openziti/zrok" data-icon="octicon-star" data-show-count="true" aria-label="Star buttons/github-buttons on GitHub">Star</a></span></span></div><div class="main-wrapper ozLayoutMainWrapper_GOGT"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/zrok/1.0/getting-started/"><span title="Getting Started" class="linkLabel_WmDU">Getting Started</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/zrok/1.0/concepts/"><span title="Concepts" class="categoryLinkLabel_W154">Concepts</span></a><button aria-label="Expand sidebar category &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/zrok/1.0/category/guides/"><span title="Guides" class="categoryLinkLabel_W154">Guides</span></a><button aria-label="Collapse sidebar category &#x27;Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/zrok/1.0/guides/install/"><span title="Install" class="categoryLinkLabel_W154">Install</span></a><button aria-label="Expand sidebar category &#x27;Install&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/zrok/1.0/guides/agent/"><span title="The zrok Agent" class="categoryLinkLabel_W154">The zrok Agent</span></a><button aria-label="Expand sidebar category &#x27;The zrok Agent&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zrok/1.0/guides/frontdoor/"><span title="frontdoor" class="linkLabel_WmDU">frontdoor</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zrok/1.0/guides/permission-modes/"><span title="Permission Modes" class="linkLabel_WmDU">Permission Modes</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/zrok/1.0/guides/docker-share/"><span title="Docker Share" class="categoryLinkLabel_W154">Docker Share</span></a><button aria-label="Expand sidebar category &#x27;Docker Share&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/zrok/1.0/category/self-hosting/"><span title="Self Hosting" class="categoryLinkLabel_W154">Self Hosting</span></a><button aria-label="Expand sidebar category &#x27;Self Hosting&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/zrok/1.0/guides/drives/"><span title="Drives" class="linkLabel_WmDU">Drives</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zrok/1.0/guides/vpn/"><span title="VPN" class="linkLabel_WmDU">VPN</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/zrok/1.0/category/myzrok/"><span title="myzrok" class="categoryLinkLabel_W154">myzrok</span></a><button aria-label="Expand sidebar category &#x27;myzrok&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->zrok<!-- --> <b>1.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/zrok/guides/drives/">latest version</a></b> (<!-- -->2.0 (Current)<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/zrok/1.0/category/guides/"><span>Guides</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Drives</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Drives</h1></header>
<p>The zrok drives CLI tools allow for simple, ergonomic management and synchronization of local and remote files.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sharing-a-drive">Sharing a Drive<a href="#sharing-a-drive" class="hash-link" aria-label="Direct link to Sharing a Drive" title="Direct link to Sharing a Drive" translate="no">​</a></h2>
<p>Virtual drives are shared through the <code>zrok</code> CLI using the <code>--backend-mode drive</code> flag through the <code>zrok share</code> command, using either the <code>public</code> or <code>private</code> sharing modes. We&#x27;ll use the <code>private</code> sharing mode for this example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ mkdir /tmp/junk</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok share private --headless --backend-mode drive /tmp/junk</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.124]    INFO sdk-golang/ziti.(*listenerManager).createSessionWithBackoff: {session token=[cf640aac-2706-49ae-9cc9-9a497d67d9c5]} new service session</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.145]    INFO main.(*sharePrivateCommand).run: allow other to access your share with the following command:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">zrok access private wkcfb58vj51l</span><br></span></code></pre></div></div>
<p>The command shown above creates an ephemeral, <code>private</code> drive share pointed at the local <code>/tmp/junk</code> folder.</p>
<p>Notice that the share token allocated by <code>zrok</code> is <code>wkcfb58vj51l</code>. We&#x27;ll use that share token to identify our virtual drive in the following operations.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="working-with-a-private-drive-share">Working with a Private Drive Share<a href="#working-with-a-private-drive-share" class="hash-link" aria-label="Direct link to Working with a Private Drive Share" title="Direct link to Working with a Private Drive Share" translate="no">​</a></h2>
<p>First, let&#x27;s copy a file into our virtual drive using the <code>zrok copy</code> command:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy LICENSE zrok://wkcfb58vj51l</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.119]    INFO zrok/drives/sync.OneWay: =&gt; /LICENSE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">copy complete!</span><br></span></code></pre></div></div>
<p>We used the URL scheme <code>zrok://&lt;shareToken&gt;</code> to refer to the private virtual drive we allocated above using the <code>zrok share private</code> command. Use <code>zrok://</code> URLs with the drives CLI tools to refer to contents of private virtual drives.</p>
<p>Next, let&#x27;s get a directory listing of the virtual drive:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok ls zrok://wkcfb58vj51l</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌──────┬─────────┬─────────┬───────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ TYPE │ NAME    │ SIZE    │ MODIFIED                      │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├──────┼─────────┼─────────┼───────────────────────────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ LICENSE │ 11.3 kB │ 2024-01-19 12:16:46 -0500 EST │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└──────┴─────────┴─────────┴───────────────────────────────┘</span><br></span></code></pre></div></div>
<p>We can make directories on the virtual drive:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok mkdir zrok://wkcfb58vj51l/stuff</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok ls zrok://wkcfb58vj51l</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌──────┬─────────┬─────────┬───────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ TYPE │ NAME    │ SIZE    │ MODIFIED                      │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├──────┼─────────┼─────────┼───────────────────────────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ LICENSE │ 11.3 kB │ 2024-01-19 12:16:46 -0500 EST │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ DIR  │ stuff   │         │                               │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└──────┴─────────┴─────────┴───────────────────────────────┘</span><br></span></code></pre></div></div>
<p>We can copy the contents of a local directory into the new directory on the virtual drive:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ls -l util/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">total 20</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-rw-r-- 1 michael michael 329 Jul 21 13:17 email.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-rw-r-- 1 michael michael 456 Jul 21 13:17 headers.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-rw-r-- 1 michael michael 609 Jul 21 13:17 proxy.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-rw-r-- 1 michael michael 361 Jul 21 13:17 size.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-rw-r-- 1 michael michael 423 Jan  2 11:57 uniqueName.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy util/ zrok://wkcfb58vj51l/stuff</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.123]    INFO zrok/drives/sync.OneWay: =&gt; /email.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.194]    INFO zrok/drives/sync.OneWay: =&gt; /headers.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.267]    INFO zrok/drives/sync.OneWay: =&gt; /proxy.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.337]    INFO zrok/drives/sync.OneWay: =&gt; /size.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.408]    INFO zrok/drives/sync.OneWay: =&gt; /uniqueName.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">copy complete!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok ls zrok://wkcfb58vj51l/stuff</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌──────┬───────────────┬───────┬───────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ TYPE │ NAME          │ SIZE  │ MODIFIED                      │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├──────┼───────────────┼───────┼───────────────────────────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ email.go      │ 329 B │ 2024-01-19 12:26:45 -0500 EST │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ headers.go    │ 456 B │ 2024-01-19 12:26:45 -0500 EST │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ proxy.go      │ 609 B │ 2024-01-19 12:26:45 -0500 EST │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ size.go       │ 361 B │ 2024-01-19 12:26:45 -0500 EST │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ uniqueName.go │ 423 B │ 2024-01-19 12:26:45 -0500 EST │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└──────┴───────────────┴───────┴───────────────────────────────┘</span><br></span></code></pre></div></div>
<p>And we can remove files and directories from the virtual drive:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok rm zrok://wkcfb58vj51l/LICENSE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok ls zrok://wkcfb58vj51l</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌──────┬───────┬──────┬──────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ TYPE │ NAME  │ SIZE │ MODIFIED │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├──────┼───────┼──────┼──────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ DIR  │ stuff │      │          │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└──────┴───────┴──────┴──────────┘</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok rm zrok://wkcfb58vj51l/stuff</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok ls zrok://wkcfb58vj51l</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌──────┬──────┬──────┬──────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ TYPE │ NAME │ SIZE │ MODIFIED │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├──────┼──────┼──────┼──────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└──────┴──────┴──────┴──────────┘</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="working-with-public-shares">Working with Public Shares<a href="#working-with-public-shares" class="hash-link" aria-label="Direct link to Working with Public Shares" title="Direct link to Working with Public Shares" translate="no">​</a></h2>
<p>Public shares work very similarly to private shares, they just use a different URL scheme:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok share public --headless --backend-mode drive /tmp/junk</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.708]    INFO sdk-golang/ziti.(*listenerManager).createSessionWithBackoff: {session token=[05e0f48b-242b-4fd9-8edb-259488535c47]} new service session</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.878]    INFO main.(*sharePublicCommand).run: access your zrok share at the following endpoints:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> https://6kiww4bn7iok.share.zrok.io</span><br></span></code></pre></div></div>
<p>The same commands, with a different URL scheme work with the <code>zrok</code> drives CLI:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy util/ https://6kiww4bn7iok.share.zrok.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.268]    INFO zrok/drives/sync.OneWay: =&gt; /email.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.406]    INFO zrok/drives/sync.OneWay: =&gt; /headers.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.530]    INFO zrok/drives/sync.OneWay: =&gt; /proxy.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.655]    INFO zrok/drives/sync.OneWay: =&gt; /size.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.714]    INFO zrok/drives/sync.OneWay: =&gt; /uniqueName.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">copy complete!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">michael@fourtyfour Fri Jan 19 12:42:52 ~/Repos/nf/zrok </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok ls https://6kiww4bn7iok.share.zrok.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌──────┬───────────────┬───────┬───────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ TYPE │ NAME          │ SIZE  │ MODIFIED                      │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├──────┼───────────────┼───────┼───────────────────────────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ email.go      │ 329 B │ 2023-07-21 13:17:56 -0400 EDT │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ headers.go    │ 456 B │ 2023-07-21 13:17:56 -0400 EDT │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ proxy.go      │ 609 B │ 2023-07-21 13:17:56 -0400 EDT │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ size.go       │ 361 B │ 2023-07-21 13:17:56 -0400 EDT │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ uniqueName.go │ 423 B │ 2024-01-02 11:57:14 -0500 EST │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└──────┴───────────────┴───────┴───────────────────────────────┘</span><br></span></code></pre></div></div>
<p>For basic authentication provided by public shares, the <code>zrok</code> drives CLI offers the <code>--basic-auth</code> flag, which accepts a <code>&lt;username&gt;:&lt;password&gt;</code> parameter to specify the authentication for the public virtual drive (if it&#x27;s required).</p>
<p>Alternatively, the authentication can be set using the <code>ZROK_DRIVES_BASIC_AUTH</code> environment variable:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ export ZROK_DRIVES_BASIC_AUTH=username:password</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="one-way-synchronization">One-way Synchronization<a href="#one-way-synchronization" class="hash-link" aria-label="Direct link to One-way Synchronization" title="Direct link to One-way Synchronization" translate="no">​</a></h2>
<p>The <code>zrok copy</code> command includes a <code>--sync</code> flag, which only copies files detected as <em>modified</em>. <code>zrok</code> considers a file with the same modification timestamp and size to be the same. Of course, this is not a strong guarantee that the files are equivalent. Future <code>zrok</code> drives versions will provide a cryptographically strong mechanism (a-la <code>rsync</code> and friends) to guarantee that files and trees of files are synchronized.</p>
<p>For now, the <code>--sync</code> flag provides a convenience mechanism to allow resuming copies of large file trees and provide a reasonable guarantee that the trees are in sync.</p>
<p>Let&#x27;s take a look at <code>zrok copy --sync</code> in action:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy --sync docs/ https://glmv049c62p7.share.zrok.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.636]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.760]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/network/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.816]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/network/_category_.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.928]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/network/prod/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.987]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/network/prod/ziti-ctrl.service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.048]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/network/prod/ziti-ctrl.yml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.107]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/network/prod/ziti-router0.service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.167]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/network/prod/ziti-router0.yml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.218]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/network/prod/zrok-access-public.service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.273]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/network/prod/zrok-ctrl.service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.328]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/network/prod/zrok-ctrl.yml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.382]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/network/prod/zrok.io-network-skeleton.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.447]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/overview.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.572]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/sharing/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.622]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/sharing/_category_.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.673]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/sharing/reserved_services.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.737]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/sharing/sharing_modes.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.793]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/v0.2_account_requests.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.902]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/v0.4_limits.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   9.691]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok_web_ui_empty_shares.png</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   9.812]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok_web_ui_new_environment.png</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   9.870]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok_zoom_to_fit.png</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">copy complete!</span><br></span></code></pre></div></div>
<p>Because the target drive was empty, <code>zrok copy --sync</code> copied the entire contents of the local <code>docs/</code> tree into the virtual drive. However, if we run that command again, we get:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy --sync docs/ https://glmv049c62p7.share.zrok.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">copy complete!</span><br></span></code></pre></div></div>
<p>The virtual drive contents are already in sync with the local filesystem tree, so there is nothing for it to copy.</p>
<p>Let&#x27;s alter the contents of the drive and run the <code>--sync</code> again:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok rm https://glmv049c62p7.share.zrok.io/images</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy --sync docs/ https://glmv049c62p7.share.zrok.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.364]    INFO zrok/drives/sync.OneWay: =&gt; /images/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.456]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok.png</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.795]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok_cover.png</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.866]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok_deployment.drawio</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   2.254]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok_web_ui_empty_shares.png</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   2.340]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok_web_ui_new_environment.png</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   2.391]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok_zoom_to_fit.png</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">copy complete!</span><br></span></code></pre></div></div>
<p>Because we removed the <code>images/</code> tree from the virtual drive, <code>zrok copy --sync</code> detected this and copied the local <code>images/</code> tree back onto the virtual drive.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="drive-to-drive-copies-and-synchronization">Drive-to-Drive Copies and Synchronization<a href="#drive-to-drive-copies-and-synchronization" class="hash-link" aria-label="Direct link to Drive-to-Drive Copies and Synchronization" title="Direct link to Drive-to-Drive Copies and Synchronization" translate="no">​</a></h2>
<p>The <code>zrok copy</code> CLI can operate on pairs of virtual drives remotely, without ever having to store files locally. This allow for drive-to-drive copies and synchronization.</p>
<p>Here are a couple of examples:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy --sync https://glmv049c62p7.share.zrok.io https://glmv049c62p7.share.zrok.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">copy complete!</span><br></span></code></pre></div></div>
<p>Specifying the same URL for both the source and the target of a <code>--sync</code> operation should always result in nothing being copied... they are the same drive with the same state.</p>
<p>We can copy files between two virtual drives with a single command:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy --sync https://glmv049c62p7.share.zrok.io zrok://hsml272j3xzf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   1.396]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   2.083]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/overview.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   2.704]    INFO zrok/drives/sync.OneWay: =&gt; /_attic/sharing/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[ 118.240]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok_web_console_empty.png</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[ 118.920]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok_enable_modal.png</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[ 119.589]    INFO zrok/drives/sync.OneWay: =&gt; /images/zrok_cover.png</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[ 120.214]    INFO zrok/drives/sync.OneWay: =&gt; /getting-started.mdx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">copy complete!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy --sync https://glmv049c62p7.share.zrok.io zrok://hsml272j3xzf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">copy complete!</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="copying-from-drives-to-the-local-filesystem">Copying from Drives to the Local Filesystem<a href="#copying-from-drives-to-the-local-filesystem" class="hash-link" aria-label="Direct link to Copying from Drives to the Local Filesystem" title="Direct link to Copying from Drives to the Local Filesystem" translate="no">​</a></h2>
<p>In the current version of the drives CLI, <code>zrok copy</code> always assumes the destination is a directory. There is currently no way to do:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy somefile someotherfile</span><br></span></code></pre></div></div>
<p>What you&#x27;ll end up with on the local filesystem is:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">somefile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">someotherfile/somefile</span><br></span></code></pre></div></div>
<p>It&#x27;s in the backlog to support file destinations in a future release of <code>zrok</code>. So, when using <code>zrok copy</code>, always take note of the destination.</p>
<p><code>zrok copy</code> supports a default destination of <code>file://.</code>, so you can do single parameter <code>zrok copy</code> commands like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok ls https://azc47r3cwjds.share.zrok.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌──────┬─────────┬─────────┬───────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ TYPE │ NAME    │ SIZE    │ MODIFIED                      │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├──────┼─────────┼─────────┼───────────────────────────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ LICENSE │ 11.3 kB │ 2023-07-21 13:17:56 -0400 EDT │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└──────┴─────────┴─────────┴───────────────────────────────┘</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy https://azc47r3cwjds.share.zrok.io/LICENSE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.260]    INFO zrok/drives/sync.OneWay: =&gt; /LICENSE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">copy complete!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ls -l</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">total 12</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-rw-r-- 1 michael michael 11346 Jan 19 13:29 LICENSE</span><br></span></code></pre></div></div>
<p>You can also specify a local folder as the destination for your copy:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok copy https://azc47r3cwjds.share.zrok.io/LICENSE /tmp/inbox</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.221]    INFO zrok/drives/sync.OneWay: =&gt; /LICENSE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">copy complete! </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ l /tmp/inbox</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">total 12</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-rw-r-- 1 michael michael 11346 Jan 19 13:30 LICENSE</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="unique-names-and-reserved-shares">Unique Names and Reserved Shares<a href="#unique-names-and-reserved-shares" class="hash-link" aria-label="Direct link to Unique Names and Reserved Shares" title="Direct link to Unique Names and Reserved Shares" translate="no">​</a></h2>
<p>Private reserved shares with unque names can be particularly useful with the drives CLI:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok reserve private -b drive --unique-name mydrive /tmp/junk</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.315]    INFO main.(*reserveCommand).run: your reserved share token is &#x27;mydrive&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok share reserved --headless mydrive</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.289]    INFO main.(*shareReservedCommand).run: sharing target: &#x27;/tmp/junk&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.289]    INFO main.(*shareReservedCommand).run: using existing backend target: /tmp/junk</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.767]    INFO sdk-golang/ziti.(*listenerManager).createSessionWithBackoff: {session token=[d519a436-9fb5-4207-afd5-7cbc28fb779a]} new service session</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[   0.927]    INFO main.(*shareReservedCommand).run: use this command to access your zrok share: &#x27;zrok access private mydrive&#x27;</span><br></span></code></pre></div></div>
<p>This makes working with <code>zrok://</code> URLs particularly convenient:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ zrok ls zrok://mydrive</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌──────┬─────────┬─────────┬───────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ TYPE │ NAME    │ SIZE    │ MODIFIED                      │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├──────┼─────────┼─────────┼───────────────────────────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│      │ LICENSE │ 11.3 kB │ 2023-07-21 13:17:56 -0400 EDT │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└──────┴─────────┴─────────┴───────────────────────────────┘</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="future-enhancements">Future Enhancements<a href="#future-enhancements" class="hash-link" aria-label="Direct link to Future Enhancements" title="Direct link to Future Enhancements" translate="no">​</a></h2>
<p>Coming in a future release of <code>zrok</code> drives are features like:</p>
<ul>
<li class="">two-way synchronization between multiple hosts... allowing for shared &quot;dropbox-like&quot; usage scenarios between multiple environments</li>
<li class="">better ergonomics for single-file destinations</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/zrok/1.0/guides/self-hosting/self-service-invite/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Invitations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/zrok/1.0/guides/vpn/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">VPN</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#sharing-a-drive" class="table-of-contents__link toc-highlight">Sharing a Drive</a></li><li><a href="#working-with-a-private-drive-share" class="table-of-contents__link toc-highlight">Working with a Private Drive Share</a></li><li><a href="#working-with-public-shares" class="table-of-contents__link toc-highlight">Working with Public Shares</a></li><li><a href="#one-way-synchronization" class="table-of-contents__link toc-highlight">One-way Synchronization</a></li><li><a href="#drive-to-drive-copies-and-synchronization" class="table-of-contents__link toc-highlight">Drive-to-Drive Copies and Synchronization</a></li><li><a href="#copying-from-drives-to-the-local-filesystem" class="table-of-contents__link toc-highlight">Copying from Drives to the Local Filesystem</a></li><li><a href="#unique-names-and-reserved-shares" class="table-of-contents__link toc-highlight">Unique Names and Reserved Shares</a></li><li><a href="#future-enhancements" class="table-of-contents__link toc-highlight">Future Enhancements</a></li></ul></div></div></div></div></main></div></div><footer class="ozFooter_vn7r"><section class="footer_bja9 ozHorizontalSectionRoot_MqVF ozhsContent_Kh8Z"><div class="footerContainer_iBVG"><div class="footerGrid_Nk5d"><div class="footerColumn_pMZB"><h3>NetFoundry</h3><p>zrok is an open-source, self-hostable sharing platform that simplifies shielding and sharing network services or files.</p><div class="footerSocialLinks_fEp6"><a href="https://github.com/openziti/zrok" target="_blank" class="footerSocialLink_NibL" rel="noreferrer"><svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"></path></svg></a><a href="https://www.linkedin.com/company/netfoundry/" target="_blank" class="footerSocialLink_NibL" rel="noreferrer"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M15.996 16V10.1C15.996 7.5 15.375 5.49999 12.025 5.49999C10.4 5.49999 9.325 6.39999 8.875 7.29999H8.825V5.79999H5.65V16H8.95V10.7C8.95 9.30001 9.2 7.9 10.925 7.9C12.65 7.9 12.675 9.59999 12.675 10.8V16H15.996Z"></path><path d="M0.25 5.79999H3.575V16H0.25V5.79999Z"></path><path d="M1.9 0C0.85 0 0 0.85 0 1.9C0 2.95 0.85 3.8 1.9 3.8C2.95 3.8 3.8 2.95 3.8 1.9C3.8 0.85 2.95 0 1.9 0Z"></path></svg></a><a href="https://youtube.com/netfoundry/" target="_blank" class="footerSocialLink_NibL" rel="noreferrer"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M15.969 4.69c-.183-1.358-1.062-2.275-2.361-2.46C12.371 2 8 2 8 2S3.629 2 2.362 2.229c-1.3.186-2.179 1.103-2.361 2.461C0 6.03 0 10 0 10s0 3.97.2 5.31c.183 1.358 1.062 2.275 2.361 2.46C3.63 18 8 18 8 18s4.371 0 5.638-.23c1.3-.185 2.178-1.102 2.361-2.46.2-1.34.2-5.31.2-5.31s0-3.97-.23-5.31zm-8.36, 8.57V6.73l3.76 2.27-3.76 2.26z"></path></svg></a><a href="https://twitter.com/netfoundry/" target="_blank" class="footerSocialLink_NibL" rel="noreferrer"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M15.996 3.038c-.59.262-1.219.44-1.885.52.677-.406 1.194-1.05 1.438-1.815-.634.375-1.337.648-2.085.795-.598-.638-1.45-1.038-2.396-1.038-1.813 0-3.283 1.469-3.283 3.282 0 .257.03.507.085.748-2.728-.137-5.147-1.445-6.766-3.43-.282.485-.444 1.05-.444 1.651 0 1.14.58 2.143 1.46 2.732-.538-.017-1.044-.164-1.487-.41v.04c0 1.59 1.13 2.918 2.633 3.219-.276.075-.567.116-.866.116-.211 0-.416-.021-.617-.06.418 1.304 1.63 2.254 3.066 2.28-1.124.883-2.539 1.406-4.077 1.406-.265 0-.526-.015-.785-.046 1.453.933 3.178 1.475 5.032 1.475 6.038 0 9.34-5.002 9.34-9.34 0-.142-.004-.284-.01-.425.641-.463 1.198-1.039 1.638-1.696"></path></svg></a></div></div><div class="footerColumn_pMZB"><h3>Documentation</h3><ul class="footerLinks_L73s"><li><a href="/docs/zrok/getting-started">Get started with zrok</a></li></ul></div><div class="footerColumn_pMZB"><h3>Community</h3><ul class="footerLinks_L73s"><li><a href="https://openziti.discourse.group/">Discourse Forum</a></li></ul></div><div class="footerColumn_pMZB"><h3>Resources</h3><ul class="footerLinks_L73s"><li><a href="https://blog.openziti.io">OpenZiti Tech Blog</a></li><li><a href="https://netfoundry.io/">NetFoundry</a></li></ul></div></div></div><div class="footerCopyright_MQh5"><p>© 2025 NetFoundry Inc. OpenZiti is an open source project sponsored by NetFoundry. All rights reserved.</p></div></section></footer></div></div>
</body>
</html>
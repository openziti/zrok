"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[5969],{28453(e,n,s){s.d(n,{R:()=>i,x:()=>c});var r=s(96540);const o={},t=r.createContext(o);function i(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(t.Provider,{value:n},e.children)}},96069(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"guides/vpn","title":"The VPN Backend Mode Has Been Deprecated","description":"The vpn backend mode has been removed from zrok as of v1.1.11.","source":"@site/docs/guides/vpn.md","sourceDirName":"guides","slug":"/guides/vpn","permalink":"/docs/zrok/guides/vpn","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"VPN (Deprecated)"},"sidebar":"tutorialSidebar","previous":{"title":"Drives","permalink":"/docs/zrok/guides/drives"},"next":{"title":"myzrok","permalink":"/docs/zrok/category/myzrok"}}');var o=s(74848),t=s(28453);const i={sidebar_label:"VPN (Deprecated)"},c="The VPN Backend Mode Has Been Deprecated",a={},d=[{value:"Why Was the VPN Mode Removed?",id:"why-was-the-vpn-mode-removed",level:2},{value:"Future Plans",id:"future-plans",level:2},{value:"Migrating Away from VPN",id:"migrating-away-from-vpn",level:2},{value:"For Host-to-Host Connectivity",id:"for-host-to-host-connectivity",level:3},{value:"TCP Tunnel Mode",id:"tcp-tunnel-mode",level:4},{value:"SOCKS Proxy Mode",id:"socks-proxy-mode",level:4},{value:"When to Use Each Mode",id:"when-to-use-each-mode",level:4},{value:"For Network-Level Access",id:"for-network-level-access",level:3},{value:"Questions or Feedback",id:"questions-or-feedback",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"the-vpn-backend-mode-has-been-deprecated",children:"The VPN Backend Mode Has Been Deprecated"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"vpn"})," backend mode has been removed from zrok as of ",(0,o.jsx)(n.code,{children:"v1.1.11"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"why-was-the-vpn-mode-removed",children:"Why Was the VPN Mode Removed?"}),"\n",(0,o.jsx)(n.p,{children:"The VPN backend mode was removed from the core zrok distribution due to dependency management issues. The underlying libraries required for VPN functionality (specifically the TUN device management libraries) created conflicts that prevented updates to critical dependencies in the zrok codebase."}),"\n",(0,o.jsx)(n.p,{children:"Maintaining these dependencies while keeping the rest of zrok's dependencies current proved to be increasingly difficult. After careful consideration, we decided to remove the VPN backend mode from core zrok to ensure the stability and security of the main codebase."}),"\n",(0,o.jsx)(n.h2,{id:"future-plans",children:"Future Plans"}),"\n",(0,o.jsxs)(n.p,{children:['We are exploring the possibility of re-introducing VPN functionality as a separate "layer" product built on top of zrok. This would be delivered as a separate CLI tool (such as ',(0,o.jsx)(n.code,{children:"zrok-vpn"}),") that provides VPN capabilities within a zrok environment, without the dependency conflicts affecting the core zrok distribution."]}),"\n",(0,o.jsx)(n.p,{children:"This approach would allow:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"The core zrok tool to remain lean and maintainable"}),"\n",(0,o.jsx)(n.li,{children:"VPN functionality to be developed and released on its own schedule"}),"\n",(0,o.jsx)(n.li,{children:"Users who need VPN features to opt-in to the additional tool"}),"\n",(0,o.jsx)(n.li,{children:"The VPN implementation could support a different subset of platforms than core zrok"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"migrating-away-from-vpn",children:"Migrating Away from VPN"}),"\n",(0,o.jsx)(n.p,{children:"If you were using the VPN backend mode, consider these alternatives:"}),"\n",(0,o.jsx)(n.h3,{id:"for-host-to-host-connectivity",children:"For Host-to-Host Connectivity"}),"\n",(0,o.jsx)(n.h4,{id:"tcp-tunnel-mode",children:"TCP Tunnel Mode"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"tcpTunnel"})," backend mode allows you to tunnel specific TCP ports between hosts. This is ideal when you need to access a specific service on a remote machine."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example: Sharing SSH access to a remote machine"})}),"\n",(0,o.jsx)(n.p,{children:'On the machine you want to access (the "sharing" side):'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"zrok2 share private --backend-mode tcpTunnel localhost:22\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This creates a private share and outputs a share token (e.g., ",(0,o.jsx)(n.code,{children:"abc123"}),")."]}),"\n",(0,o.jsx)(n.p,{children:'On your local machine (the "accessing" side):'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"zrok2 access private --bind 127.0.0.1:2222 abc123\n"})}),"\n",(0,o.jsx)(n.p,{children:"Now you can SSH to the remote machine through the tunnel:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ssh -p 2222 user@127.0.0.1\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example: Accessing a database on a remote server"})}),"\n",(0,o.jsx)(n.p,{children:"Share a PostgreSQL database:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"zrok2 share private --backend-mode tcpTunnel localhost:5432\n"})}),"\n",(0,o.jsx)(n.p,{children:"Access it locally:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"zrok2 access private --bind 127.0.0.1:5432 <share-token>\n"})}),"\n",(0,o.jsx)(n.p,{children:"Connect with your database client:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"psql -h 127.0.0.1 -p 5432 -U myuser mydatabase\n"})}),"\n",(0,o.jsx)(n.h4,{id:"socks-proxy-mode",children:"SOCKS Proxy Mode"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"socks"})," backend mode creates a SOCKS5 proxy, enabling dynamic port forwarding to multiple destinations through a single share. This is useful when you need to access multiple services on a remote network."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example: Creating a SOCKS proxy to a remote network"})}),"\n",(0,o.jsx)(n.p,{children:'On the remote machine (the "sharing" side):'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"zrok2 share private --backend-mode socks\n"})}),"\n",(0,o.jsx)(n.p,{children:'On your local machine (the "accessing" side):'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"zrok2 access private --bind 127.0.0.1:1080 <share-token>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Now configure your applications to use the SOCKS5 proxy at ",(0,o.jsx)(n.code,{children:"127.0.0.1:1080"}),". For example:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"curl:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"curl --socks5-hostname 127.0.0.1:1080 http://internal-server:8080/api\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"SSH (to access any host reachable from the remote machine):"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ssh -o ProxyCommand='nc -x 127.0.0.1:1080 %h %p' user@internal-host\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Browser:"})," Configure your browser's proxy settings to use SOCKS5 proxy ",(0,o.jsx)(n.code,{children:"127.0.0.1:1080"})," to browse internal web applications."]}),"\n",(0,o.jsx)(n.h4,{id:"when-to-use-each-mode",children:"When to Use Each Mode"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Use Case"}),(0,o.jsx)(n.th,{children:"Recommended Mode"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Access a single TCP service (SSH, database, etc.)"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"tcpTunnel"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Access multiple services on a remote network"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"socks"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Web browsing through a remote network"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"socks"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Persistent service tunneling"}),(0,o.jsxs)(n.td,{children:[(0,o.jsx)(n.code,{children:"tcpTunnel"})," with reserved name"]})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"for-network-level-access",children:"For Network-Level Access"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Consider deploying an OpenZiti network directly for full network-level zero-trust connectivity"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"questions-or-feedback",children:"Questions or Feedback"}),"\n",(0,o.jsxs)(n.p,{children:["If you have questions about this change or need help migrating your workflows, please start a discussion on the ",(0,o.jsx)(n.a,{href:"https://openziti.discourse.group/",children:"OpenZiti Discourse Group"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);
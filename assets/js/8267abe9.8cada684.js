"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4855],{22748(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"concepts/sharing-reserved","title":"Reserved Names and Namespaces","description":"This guide describes the v2.0 namespace and name system. If you\'re migrating from v1.x, see the v2 migration guide for details on how this replaces the old zrok reserve workflow.","source":"@site/docs/concepts/sharing-reserved.md","sourceDirName":"concepts","slug":"/concepts/sharing-reserved","permalink":"/docs/zrok/concepts/sharing-reserved","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Public Shares","permalink":"/docs/zrok/concepts/sharing-public"},"next":{"title":"Sharing HTTP Servers","permalink":"/docs/zrok/concepts/http"}}');var r=s(74848),i=s(28453);const t={sidebar_position:10},c="Reserved Names and Namespaces",l={},o=[{value:"Understanding Namespaces and Names",id:"understanding-namespaces-and-names",level:2},{value:"Namespaces",id:"namespaces",level:3},{value:"Names",id:"names",level:3},{value:"Creating Reserved Names",id:"creating-reserved-names",level:2},{value:"Using Names with Shares",id:"using-names-with-shares",level:2},{value:"Public Shares with Names",id:"public-shares-with-names",level:3},{value:"Private Shares with Custom Tokens",id:"private-shares-with-custom-tokens",level:3},{value:"Multiple Names on One Share",id:"multiple-names-on-one-share",level:3},{value:"Managing Names",id:"managing-names",level:2},{value:"Listing Your Names",id:"listing-your-names",level:3},{value:"Modifying Name Status",id:"modifying-name-status",level:3},{value:"Deleting Names",id:"deleting-names",level:3},{value:"Configuring Default Namespace",id:"configuring-default-namespace",level:2},{value:"Migration from v1.x",id:"migration-from-v1x",level:2},{value:"Benefits of the Namespace/Name System",id:"benefits-of-the-namespacename-system",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"reserved-names-and-namespaces",children:"Reserved Names and Namespaces"})}),"\n",(0,r.jsx)(n.admonition,{title:"v2.0 feature",type:"info",children:(0,r.jsxs)(n.p,{children:["This guide describes the v2.0 namespace and name system. If you're migrating from v1.x, see the ",(0,r.jsx)(n.a,{href:"/docs/zrok/guides/v2-migration-guide",children:"v2 migration guide"})," for details on how this replaces the old ",(0,r.jsx)(n.code,{children:"zrok reserve"})," workflow."]})}),"\n",(0,r.jsxs)(n.p,{children:["By default, when you create a ",(0,r.jsx)(n.code,{children:"public"})," or ",(0,r.jsx)(n.code,{children:"private"})," share using the ",(0,r.jsx)(n.code,{children:"zrok2 share"})," command, zrok assigns it a randomly generated ",(0,r.jsx)(n.em,{children:"share token"}),". When you terminate the ",(0,r.jsx)(n.code,{children:"zrok2 share"})," command, the share is deleted and the token is no longer valid. If you run ",(0,r.jsx)(n.code,{children:"zrok2 share"})," again, you will receive a brand new share token."]}),"\n",(0,r.jsxs)(n.p,{children:["In v2.0, zrok introduces a more powerful system for creating persistent shares through ",(0,r.jsx)(n.strong,{children:"namespaces"})," and ",(0,r.jsx)(n.strong,{children:"names"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"understanding-namespaces-and-names",children:"Understanding Namespaces and Names"}),"\n",(0,r.jsx)(n.h3,{id:"namespaces",children:"Namespaces"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"namespace"})," is a logical grouping for names, similar to how a DNS zone works. Think of it as a container that holds related names. For example:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.code,{children:"public"})," namespace might correspond to ",(0,r.jsx)(n.code,{children:"share.zrok.io"})]}),"\n",(0,r.jsxs)(n.li,{children:["A custom namespace might correspond to your own domain like ",(0,r.jsx)(n.code,{children:"example.com"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Namespaces can be:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Open"})," - accessible to all users of the zrok service instance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Closed"})," - requiring explicit grants for access"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You can see available namespaces with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"zrok2 list namespaces\n"})}),"\n",(0,r.jsx)(n.h3,{id:"names",children:"Names"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"name"})," is a unique identifier within a namespace. Names can be:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reserved"})," - persistent across multiple runs of ",(0,r.jsx)(n.code,{children:"zrok share"}),", similar to v1.x reserved shares"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ephemeral"})," - temporary, deleted when the share terminates"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Think of names as similar to DNS A records within a zone. For example, if you create a name ",(0,r.jsx)(n.code,{children:"api"})," in the ",(0,r.jsx)(n.code,{children:"public"})," namespace (corresponding to ",(0,r.jsx)(n.code,{children:"share.zrok.io"}),"), your share might be accessible at ",(0,r.jsx)(n.code,{children:"https://api.share.zrok.io"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"creating-reserved-names",children:"Creating Reserved Names"}),"\n",(0,r.jsxs)(n.p,{children:["To create a reserved name, use the ",(0,r.jsx)(n.code,{children:"zrok2 create name"})," command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# create a reserved name in the default namespace\nzrok2 create name myapp\n\n# create a reserved name in a specific namespace\nzrok2 create name -n public myapp\n\n# create a reserved name in a custom namespace\nzrok2 create name -n <namespaceToken> api\n"})}),"\n",(0,r.jsx)(n.p,{children:"Once created, you can use this name repeatedly across share sessions. The name persists even when your share is not running."}),"\n",(0,r.jsx)(n.h2,{id:"using-names-with-shares",children:"Using Names with Shares"}),"\n",(0,r.jsx)(n.h3,{id:"public-shares-with-names",children:"Public Shares with Names"}),"\n",(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"-n"})," flag to specify a name selection when creating a public share:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# share using a name in the default namespace\nzrok2 share public localhost:8080 -n public:myapp\n\n# share using a name in a specific namespace\nzrok2 share public localhost:8080 -n <namespaceToken>:api\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The name can be either reserved (created with ",(0,r.jsx)(n.code,{children:"zrok2 create name"}),") or ephemeral (created on-the-fly)."]}),"\n",(0,r.jsx)(n.h3,{id:"private-shares-with-custom-tokens",children:"Private Shares with Custom Tokens"}),"\n",(0,r.jsxs)(n.p,{children:["For private shares, you can use the ",(0,r.jsx)(n.code,{children:"--share-token"})," flag to specify a persistent vanity token:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# create a private share with a custom token\nzrok2 share private localhost:8080 --share-token myapi-prod\n\n# access it from another environment\nzrok2 access private myapi-prod\n"})}),"\n",(0,r.jsxs)(n.p,{children:["When using the zrok agent, shares with ",(0,r.jsx)(n.code,{children:"--share-token"})," are automatically persistent and will restart after abnormal exit or agent restart."]}),"\n",(0,r.jsx)(n.h3,{id:"multiple-names-on-one-share",children:"Multiple Names on One Share"}),"\n",(0,r.jsx)(n.p,{children:"A powerful v2.0 feature: you can specify multiple names for a single share:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# create multiple names\nzrok2 create name -n public myapp\nzrok2 create name -n public myapp-staging\n\n# share using both names\nzrok2 share public localhost:3000 \\\n  -n public:myapp \\\n  -n public:myapp-staging\n"})}),"\n",(0,r.jsx)(n.p,{children:"Both URLs will point to the same backend target, allowing you to use different names for the same service."}),"\n",(0,r.jsx)(n.h2,{id:"managing-names",children:"Managing Names"}),"\n",(0,r.jsx)(n.h3,{id:"listing-your-names",children:"Listing Your Names"}),"\n",(0,r.jsx)(n.p,{children:"See all your names across all namespaces:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"zrok2 list names\n"})}),"\n",(0,r.jsx)(n.p,{children:"This shows a table with:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"URL (the full public URL if applicable)"}),"\n",(0,r.jsx)(n.li,{children:"Name"}),"\n",(0,r.jsx)(n.li,{children:"Namespace"}),"\n",(0,r.jsx)(n.li,{children:"Share token (if currently being shared)"}),"\n",(0,r.jsx)(n.li,{children:"Reserved status"}),"\n",(0,r.jsx)(n.li,{children:"Creation timestamp"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"modifying-name-status",children:"Modifying Name Status"}),"\n",(0,r.jsx)(n.p,{children:"Toggle the reserved status of a name:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# make a name reserved (persistent)\nzrok2 modify name -n public myapp -r\n\n# make a name ephemeral (will be deleted when share ends)\nzrok2 modify name -n public myapp -r=false\n"})}),"\n",(0,r.jsx)(n.h3,{id:"deleting-names",children:"Deleting Names"}),"\n",(0,r.jsx)(n.p,{children:"Remove a reserved name when you no longer need it:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# delete a name from the default namespace\nzrok2 delete name myapp\n\n# delete a name from a specific namespace\nzrok2 delete name -n <namespaceToken> api\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuring-default-namespace",children:"Configuring Default Namespace"}),"\n",(0,r.jsxs)(n.p,{children:["You can set a default namespace to avoid specifying ",(0,r.jsx)(n.code,{children:"-n"})," on every command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# set via config command\nzrok2 config set defaultNamespace public\n\n# or via environment variable\nexport ZROK2_DEFAULT_NAMESPACE=public\n"})}),"\n",(0,r.jsx)(n.p,{children:"Once configured, commands will use this namespace by default:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# these are equivalent if defaultNamespace is set to 'public'\nzrok2 create name myapp\nzrok2 create name -n public myapp\n"})}),"\n",(0,r.jsx)(n.h2,{id:"migration-from-v1x",children:"Migration from v1.x"}),"\n",(0,r.jsx)(n.p,{children:"If you're coming from zrok v1.x, here's the mapping:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"v1.x Command"}),(0,r.jsx)(n.th,{children:"v2.0 Equivalent"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"zrok2 reserve public <target>"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"zrok2 create name <name>"})," + ",(0,r.jsx)(n.code,{children:"zrok2 share public <target> -n <namespace>:<name>"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"zrok2 share reserved <token>"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"zrok2 share public <target> -n <namespace>:<name>"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"zrok2 release <token>"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"zrok2 delete name <name>"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"zrok2 reserve private <target>"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"zrok2 share private <target> --share-token <name>"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"/docs/zrok/guides/v2-migration-guide",children:"v2 migration guide"})," for comprehensive migration instructions."]}),"\n",(0,r.jsx)(n.h2,{id:"benefits-of-the-namespacename-system",children:"Benefits of the Namespace/Name System"}),"\n",(0,r.jsx)(n.p,{children:"The v2.0 namespace and name system provides several advantages over v1.x reserved shares:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Flexibility"})," - less coupling between environments and external names"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Portability"})," - easily move share backends between hosts without changing public names"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multiple Names"})," - use multiple names for the same share"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Organization"})," - logical grouping through namespaces"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom Domains"})," - support for custom domain namespaces (when configured by administrators)"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453(e,n,s){s.d(n,{R:()=>t,x:()=>c});var a=s(96540);const r={},i=a.createContext(r);function t(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);
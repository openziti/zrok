"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4340],{28453(e,n,s){s.d(n,{R:()=>o,x:()=>a});var t=s(96540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}},96337(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>g,frontMatter:()=>c,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"guides/agent/linux-service","title":"Linux Agent Service","description":"Overview","source":"@site/docs/guides/agent/linux-service.mdx","sourceDirName":"guides/agent","slug":"/guides/agent/linux-service","permalink":"/docs/zrok/guides/agent/linux-service","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":40,"frontMatter":{"title":"Linux Agent Service","sidebar_position":40},"sidebar":"tutorialSidebar","previous":{"title":"HTTP Health Checks","permalink":"/docs/zrok/guides/agent/http-healthcheck"},"next":{"title":"Windows Agent Service","permalink":"/docs/zrok/guides/agent/windows-service/"}}');var r=s(74848),i=s(28453);function o(e){const n={a:"a",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Set up ",(0,r.jsx)(n.code,{children:"zrok"}),"'s Linux package repository by following ",(0,r.jsx)(n.a,{href:"/docs/zrok/guides/install/linux",children:"the Linux install guide"}),", or run this one-liner to complete the repo setup and install packages."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -sSLf https://get.openziti.io/install.bash \\\n| sudo bash -s zrok2-agent\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["If you set up the repository by following the guide, then also install the ",(0,r.jsx)(n.code,{children:"zrok2-agent"})," package. This package provides the systemd service."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:'title="Ubuntu, Debian"',children:"sudo apt install zrok2-agent\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:'title="Fedora, Rocky"',children:"sudo dnf install zrok2-agent\n"})}),"\n"]}),"\n"]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}const c={title:"Linux Agent Service",sidebar_position:40},l=void 0,d={},h=[{value:"Overview",id:"overview",level:2},{value:"Install the Package",id:"install-the-package",level:2},{value:"Enable your Account",id:"enable-your-account",level:2},{value:"Start the Service",id:"start-the-service",level:2},{value:"Use the agent",id:"use-the-agent",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Check the User Service Log",id:"check-the-user-service-log",level:3}];function u(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["Run the zrok agent as a ",(0,r.jsx)(n.code,{children:"systemd --user"})," service under your Linux user account."]}),"\n",(0,r.jsx)(n.h2,{id:"install-the-package",children:"Install the Package"}),"\n",(0,r.jsxs)(n.p,{children:["The package provides the ",(0,r.jsx)(n.code,{children:"zrok"})," executable and the ",(0,r.jsx)(n.code,{children:"zrok2-agent.service"})," unit."]}),"\n",(0,r.jsx)(a,{}),"\n",(0,r.jsx)(n.h2,{id:"enable-your-account",children:"Enable your Account"}),"\n",(0,r.jsxs)(n.p,{children:["This creates a ",(0,r.jsx)(n.code,{children:"~/.zrok2"})," directory enabled for your zrok account."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"zrok2 enable <your_account_token>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"start-the-service",children:"Start the Service"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"systemctl --user enable --now zrok2-agent.service\n"})}),"\n",(0,r.jsx)(n.h2,{id:"use-the-agent",children:"Use the agent"}),"\n",(0,r.jsxs)(n.p,{children:["Learn more about using the zrok agent in the ",(0,r.jsx)(n.a,{href:"/docs/zrok/guides/agent/",children:"agent guide"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"check-the-user-service-log",children:"Check the User Service Log"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"journalctl --user -lfu zrok2-agent.service\n"})})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);
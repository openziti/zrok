"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9606],{86404:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"guides/self-hosting/oauth/integrations/oidc","title":"Generic OIDC Setup","description":"This guide covers setting up OpenID Connect (OIDC) providers for your zrok public frontend. OIDC is supported by many identity providers including Keycloak, Auth0, Okta, Azure AD, and others.","source":"@site/../docs/guides/self-hosting/oauth/integrations/oidc.md","sourceDirName":"guides/self-hosting/oauth/integrations","slug":"/guides/self-hosting/oauth/integrations/oidc","permalink":"/docs/guides/self-hosting/oauth/integrations/oidc","draft":false,"unlisted":false,"editUrl":"https://github.com/openziti/zrok/blob/main/docs/../docs/guides/self-hosting/oauth/integrations/oidc.md","tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"sidebar_position":30},"sidebar":"tutorialSidebar","previous":{"title":"GitHub OAuth Setup","permalink":"/docs/guides/self-hosting/oauth/integrations/github"},"next":{"title":"Instance Config","permalink":"/docs/guides/self-hosting/instance-configuration"}}');var o=i(74848),s=i(28453);const t={sidebar_position:30},d="Generic OIDC Setup",c={},l=[{value:"Provider Requirements",id:"provider-requirements",level:2},{value:"Configure OIDC Provider",id:"configure-oidc-provider",level:2},{value:"Frontend Configuration",id:"frontend-configuration",level:2},{value:"Configuration Options",id:"configuration-options",level:3},{value:"Common OIDC Providers",id:"common-oidc-providers",level:2},{value:"Keycloak",id:"keycloak",level:3},{value:"Auth0",id:"auth0",level:3},{value:"Azure AD",id:"azure-ad",level:3},{value:"Okta",id:"okta",level:3},{value:"Redirect URL Format",id:"redirect-url-format",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"generic-oidc-setup",children:"Generic OIDC Setup"})}),"\n",(0,o.jsx)(n.p,{children:"This guide covers setting up OpenID Connect (OIDC) providers for your zrok public frontend. OIDC is supported by many identity providers including Keycloak, Auth0, Okta, Azure AD, and others."}),"\n",(0,o.jsx)(n.h2,{id:"provider-requirements",children:"Provider Requirements"}),"\n",(0,o.jsx)(n.p,{children:"Your OIDC provider must support:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Authorization Code flow"}),"\n",(0,o.jsx)(n.li,{children:"Discovery endpoint (optional but recommended)"}),"\n",(0,o.jsx)(n.li,{children:"PKCE (Proof Key for Code Exchange) - optional but recommended for security"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"configure-oidc-provider",children:"Configure OIDC Provider"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Create a new OAuth/OIDC client in your provider's admin interface"}),"\n",(0,o.jsxs)(n.li,{children:["Set the ",(0,o.jsx)(n.strong,{children:"redirect URI"})," to: ",(0,o.jsx)(n.code,{children:"https://your-oauth-frontend-domain:port/<provider-name>/auth/callback"})]}),"\n",(0,o.jsxs)(n.li,{children:["Configure required scopes: ",(0,o.jsx)(n.code,{children:"openid"}),", ",(0,o.jsx)(n.code,{children:"email"}),", ",(0,o.jsx)(n.code,{children:"profile"})]}),"\n",(0,o.jsxs)(n.li,{children:["Note the ",(0,o.jsx)(n.strong,{children:"client ID"}),", ",(0,o.jsx)(n.strong,{children:"client secret"}),", and ",(0,o.jsx)(n.strong,{children:"issuer URL"})]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"frontend-configuration",children:"Frontend Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["Add the OIDC provider to your ",(0,o.jsx)(n.code,{children:"frontend.yml"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'oauth:\n  providers:\n    - name: "my-oidc-provider"\n      type: "oidc"\n      client_id: "<your-oidc-client-id>"\n      client_secret: "<your-oidc-client-secret>"\n      scopes: ["openid", "email", "profile"]\n      issuer: "https://your-oidc-provider.com"\n      supports_pkce: true  # recommended for security\n'})}),"\n",(0,o.jsx)(n.h3,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"name"})}),": Unique identifier for this provider (used in share commands)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"type"})}),": Must be ",(0,o.jsx)(n.code,{children:'"oidc"'})," for OpenID Connect providers"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"client_id"})})," and ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"client_secret"})}),": OAuth client credentials from your provider"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"scopes"})}),": OAuth scopes to request (typically ",(0,o.jsx)(n.code,{children:'["openid", "email", "profile"]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"issuer"})}),": The OIDC issuer URL (used for auto-discovery)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"discovery_url"})}),": Optional explicit discovery endpoint URL (if not using issuer auto-discovery)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"supports_pkce"})}),": Whether the provider supports PKCE (recommended: ",(0,o.jsx)(n.code,{children:"true"}),")"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"common-oidc-providers",children:"Common OIDC Providers"}),"\n",(0,o.jsx)(n.h3,{id:"keycloak",children:"Keycloak"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'issuer: "https://your-keycloak.com/realms/your-realm"\n'})}),"\n",(0,o.jsx)(n.h3,{id:"auth0",children:"Auth0"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'issuer: "https://your-domain.auth0.com/"\n'})}),"\n",(0,o.jsx)(n.h3,{id:"azure-ad",children:"Azure AD"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'issuer: "https://login.microsoftonline.com/<tenant-id>/v2.0"\n'})}),"\n",(0,o.jsx)(n.h3,{id:"okta",children:"Okta"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'issuer: "https://your-domain.okta.com/oauth2/default"\n'})}),"\n",(0,o.jsx)(n.h2,{id:"redirect-url-format",children:"Redirect URL Format"}),"\n",(0,o.jsx)(n.p,{children:"For OIDC providers, the redirect URL should use your configured provider name:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"https://your-oauth-frontend-domain:port/<provider-name>/auth/callback\n"})}),"\n",(0,o.jsxs)(n.p,{children:["For example, with the provider name ",(0,o.jsx)(n.code,{children:'"my-oidc-provider"'}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"https://your-oauth-frontend-domain:port/my-oidc-provider/auth/callback\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>d});var r=i(96540);const o={},s=r.createContext(o);function t(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);
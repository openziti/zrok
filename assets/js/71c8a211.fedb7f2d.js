"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1421],{7417:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>l,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"guides/agent/index","title":"Agent","description":"The zrok Agent centralizes management of your zrok shares and accesses. It provides both web-based and command-line interfaces, and changes how the zrok share and zrok access commands behave.","source":"@site/../docs/guides/agent/index.mdx","sourceDirName":"guides/agent","slug":"/guides/agent/","permalink":"/docs/guides/agent/","draft":false,"unlisted":false,"editUrl":"https://github.com/openziti/zrok/blob/main/docs/../docs/guides/agent/index.mdx","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"title":"Agent","sidebar_position":20},"sidebar":"tutorialSidebar","previous":{"title":"Windows","permalink":"/docs/guides/install/windows"},"next":{"title":"Remoting","permalink":"/docs/guides/agent/remoting"}}');var a=s(4848),r=s(8453);const i={title:"Agent",sidebar_position:20},c=void 0,o={},d=[{value:"Tutorial",id:"tutorial",level:2},{value:"Running the Agent in the background",id:"running-the-agent-in-the-background",level:3},{value:"How the Agent Works",id:"how-the-agent-works",level:2},{value:"Centralized Management",id:"centralized-management",level:3},{value:"Agent Console",id:"agent-console",level:3}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["The zrok Agent centralizes management of your zrok shares and accesses. It provides both web-based and command-line interfaces, and changes how the ",(0,a.jsx)(n.code,{children:"zrok share"})," and ",(0,a.jsx)(n.code,{children:"zrok access"})," commands behave."]}),"\n",(0,a.jsx)(n.h2,{id:"tutorial",children:"Tutorial"}),"\n",(0,a.jsx)(n.p,{children:"Run the Agent in the foreground."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"zrok agent\n"})}),"\n",(0,a.jsx)(n.p,{children:"In another terminal, open the console."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"zrok agent console\n"})}),"\n",(0,a.jsx)(n.p,{children:"You should see the Agent UI in your default web browser."}),"\n",(0,a.jsx)(n.p,{children:"Start sharing a public share with the Agent."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"zrok share public 8080\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-buttonless",metastring:'title="Output"',children:'token:"zje5x8p0k9pi" frontendEndpoints:"https://zje5x8p0k9pi.share.zrok.io"\n'})}),"\n",(0,a.jsx)(n.p,{children:"You will see the new public share in the Agent UI and you can access it at the public share URL."}),"\n",(0,a.jsx)(n.p,{children:"Reserve a private share for the Agent to share."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'zrok reserve private 8080 --closed --unique-name "myshare"\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-buttonless",metastring:'title="Output"',children:"[   1.883]    INFO main.(*reserveCommand).run: your reserved share token is 'myshare'\n"})}),"\n",(0,a.jsx)(n.p,{children:"Start sharing the reserved share with the Agent."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'zrok share reserved "myshare"\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-buttonless",metastring:'title="Output"',children:'[   0.001]    INFO main.(*shareReservedCommand).shareAgent: starting\ntoken:"myshare" backendMode:"proxy" shareMode:"private" target:"http://127.0.0.1:8080"\n'})}),"\n",(0,a.jsxs)(n.p,{children:["You will see the new reserved share in the Agent UI and you can access it by running ",(0,a.jsx)(n.code,{children:'zrok access "myshare"'})," on another device where you have enabled the same zrok account, since the share was reserved with closed permission mode."]}),"\n",(0,a.jsx)(n.p,{children:"Check the status of the Agent's shares and accesses."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"zrok agent status\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-buttonless",metastring:'title="Output"',children:" FRONTEND TOKEN  TOKEN  BIND ADDRESS\n0 accesses in agent\n\n TOKEN         RESERVED  SHARE MODE  BACKEND MODE  TARGET\n myshare       true      private     tcpTunnel     127.0.0.1:8080\n1 share in agent\n"})}),"\n",(0,a.jsx)(n.h3,{id:"running-the-agent-in-the-background",children:"Running the Agent in the background"}),"\n",(0,a.jsx)(n.p,{children:"You can keep the Agent running reliably in the background by installing the Agent service in Windows or Linux."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Windows - ",(0,a.jsx)(n.a,{href:"/docs/guides/agent/windows-service/",children:"set up the Windows system service"})]}),"\n",(0,a.jsxs)(n.li,{children:["Linux - ",(0,a.jsxs)(n.a,{href:"/docs/guides/agent/linux-service",children:["install the Linux package ",(0,a.jsx)(n.code,{children:"zrok-agent"})]})]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"how-the-agent-works",children:"How the Agent Works"}),"\n",(0,a.jsx)(n.h3,{id:"centralized-management",children:"Centralized Management"}),"\n",(0,a.jsxs)(n.p,{children:["Without the Agent running, each time you execute a ",(0,a.jsx)(n.code,{children:"zrok share"})," or ",(0,a.jsx)(n.code,{children:"zrok access"})," command, a separate process is created to handle that specific share or access."]}),"\n",(0,a.jsx)(n.p,{children:"When the Agent is running:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"All shares and accesses are managed by a single Agent process."}),"\n",(0,a.jsx)(n.li,{children:"The Agent provides a web UI for monitoring and managing your shares and accesses."}),"\n",(0,a.jsxs)(n.li,{children:["The ",(0,a.jsx)(n.code,{children:"zrok share"})," and ",(0,a.jsx)(n.code,{children:"zrok access"})," commands delegate their operations to the running Agent."]}),"\n",(0,a.jsx)(n.li,{children:"You can stop and restart individual shares/accesses without terminating the Agent."}),"\n",(0,a.jsxs)(n.li,{children:["The Agent will remember and automatically restart your shares started with ",(0,a.jsx)(n.code,{children:"share reserved"}),", and any accesses started with ",(0,a.jsx)(n.code,{children:"access private"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["The Agent will not restart regular, ephemeral shares started with ",(0,a.jsx)(n.code,{children:"share private"})," or ",(0,a.jsx)(n.code,{children:"share public"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"agent-console",children:"Agent Console"}),"\n",(0,a.jsx)(n.p,{children:"The Agent provides a web-based console interface that can be accessed with:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"zrok agent console\n"})}),"\n",(0,a.jsx)(n.p,{children:"This command opens your default web browser to the Agent UI, where you can:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"View the status of all your active shares and accesses"}),"\n",(0,a.jsx)(n.li,{children:"Create new shares and accesses using simple UI widgets"}),"\n",(0,a.jsx)(n.li,{children:"Stop or restart existing shares and accesses"}),"\n",(0,a.jsx)(n.li,{children:"Monitor traffic and connection statistics"}),"\n"]})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>c});var t=s(6540);const a={},r=t.createContext(a);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);